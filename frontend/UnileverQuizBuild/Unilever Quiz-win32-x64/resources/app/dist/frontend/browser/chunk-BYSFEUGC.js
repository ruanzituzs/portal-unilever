import{a as q}from"./chunk-QMFBIE3V.js";import{b as D,c as k,d as M,e as N,f as I,g as T,j as G,k as j,o as U,p as A}from"./chunk-BDL2EWQC.js";import{$a as w,Ab as C,Ba as l,Ia as p,Ib as O,Ma as S,Qa as V,T as v,U as x,V as h,W as E,Xa as a,Ya as t,Za as e,_a as m,ab as s,bb as c,eb as o,fb as f,gb as g,yb as _,za as y,zb as F}from"./chunk-G2JQ2GAW.js";function z(d,b){if(d&1){let i=w();t(0,"tr")(1,"td",24)(2,"div",25),o(3),e(),t(4,"div",26),o(5),e(),t(6,"a",27),o(7,"Ver V\xEDdeo"),e()(),t(8,"td",28),o(9),e(),t(10,"td",29)(11,"button",30),s("click",function(){let n=v(i).$implicit,u=c();return x(u.deleteVideo(n.id))}),o(12,"Excluir"),e()()()}if(d&2){let i=b.$implicit,r=c();l(3),f(i.title),l(2),f(i.description),l(),a("href",r.apiUrl+i.url,y),l(3),g(" ",i.duration,"s ")}}function B(d,b){d&1&&(t(0,"tr")(1,"td",31),o(2,"Nenhum v\xEDdeo cadastrado."),e()())}var W=(()=>{class d{fb;videosService;uploadForm;videos=[];selectedFile=null;uploading=!1;apiUrl=O.apiUrl;constructor(i,r){this.fb=i,this.videosService=r,this.uploadForm=this.fb.group({title:["",k.required],description:[""],duration:[0]})}ngOnInit(){this.loadVideos()}loadVideos(){this.videosService.getVideos().subscribe(i=>this.videos=i)}onFileSelected(i){this.selectedFile=i.target.files[0]}onSubmit(){if(this.uploadForm.valid&&this.selectedFile){this.uploading=!0;let i=new FormData;i.append("file",this.selectedFile),i.append("title",this.uploadForm.get("title")?.value),i.append("description",this.uploadForm.get("description")?.value),i.append("duration",this.uploadForm.get("duration")?.value),this.videosService.uploadVideo(i).subscribe({next:()=>{this.uploading=!1,this.selectedFile=null,this.uploadForm.reset(),this.loadVideos(),alert("V\xEDdeo enviado com sucesso!")},error:r=>{this.uploading=!1,console.error(r),alert("Erro ao enviar v\xEDdeo.")}})}}deleteVideo(i){confirm("Tem certeza que deseja apagar este v\xEDdeo?")&&this.videosService.deleteVideo(i).subscribe(()=>this.loadVideos())}static \u0275fac=function(r){return new(r||d)(p(U),p(q))};static \u0275cmp=S({type:d,selectors:[["app-video-manager"]],decls:44,vars:5,consts:[[1,"p-6","max-w-7xl","mx-auto"],[1,"flex","items-center","gap-4","mb-8"],["src","/logo.png","alt","Unilever Logo",1,"h-10","w-auto","border-r","pr-4","border-slate-300"],["routerLink","/admin",1,"flex","items-center","gap-2","text-slate-600","hover:text-slate-900","font-medium","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","font-bold","mb-6","text-gray-800"],[1,"bg-white","rounded-lg","shadow","p-6","mb-8"],[1,"text-lg","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","title","type","text",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","p-2","border"],["formControlName","description","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","p-2","border"],["formControlName","duration","type","number",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","p-2","border"],["type","file","accept","video/mp4",1,"mt-1","block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-unilever-blue","hover:bg-blue-700","focus:outline-none","disabled:opacity-50",3,"disabled"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"px-6","py-4"],[1,"font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["target","_blank",1,"text-xs","text-blue-500","hover:underline",3,"href"],[1,"px-6","py-4","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-red-600","hover:text-red-900",3,"click"],["colspan","3",1,"px-6","py-4","text-center","text-gray-500"]],template:function(r,n){r&1&&(t(0,"div",0)(1,"div",1),m(2,"img",2),t(3,"a",3),h(),t(4,"svg",4),m(5,"path",5),e(),o(6," Voltar ao Dashboard "),e()(),E(),t(7,"h2",6),o(8,"Gerenciamento de V\xEDdeos"),e(),t(9,"div",7)(10,"h3",8),o(11,"Novo V\xEDdeo"),e(),t(12,"form",9),s("ngSubmit",function(){return n.onSubmit()}),t(13,"div")(14,"label",10),o(15,"T\xEDtulo"),e(),m(16,"input",11),e(),t(17,"div")(18,"label",10),o(19,"Descri\xE7\xE3o"),e(),m(20,"textarea",12),e(),t(21,"div")(22,"label",10),o(23,"Dura\xE7\xE3o (segundos estimativa)"),e(),m(24,"input",13),e(),t(25,"div")(26,"label",10),o(27,"Arquivo de V\xEDdeo (MP4)"),e(),t(28,"input",14),s("change",function(L){return n.onFileSelected(L)}),e()(),t(29,"button",15),o(30),e()()(),t(31,"div",16)(32,"table",17)(33,"thead",18)(34,"tr")(35,"th",19),o(36,"V\xEDdeo "),e(),t(37,"th",19),o(38,"Dura\xE7\xE3o "),e(),t(39,"th",20),o(40,"A\xE7\xF5es "),e()()(),t(41,"tbody",21),V(42,z,13,4,"tr",22)(43,B,3,0,"tr",23),e()()()()),r&2&&(l(12),a("formGroup",n.uploadForm),l(17),a("disabled",!n.uploadForm.valid||!n.selectedFile||n.uploading),l(),g(" ",n.uploading?"Enviando...":"Enviar V\xEDdeo"," "),l(12),a("ngForOf",n.videos),l(),a("ngIf",n.videos.length===0))},dependencies:[C,_,F,A,I,D,T,M,N,j,G],encapsulation:2})}return d})();export{W as VideoManagerComponent};
